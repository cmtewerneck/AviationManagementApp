

<div class="login-page">
  <div class="alert alert-danger" *ngIf="errors.length > 0">
    <h3 id="msgRetorno">Opa! Alguma coisa não deu certo:</h3>
    <ul>
        <li *ngFor="let error of errors">{{ error }}</li>
    </ul>
  </div>
<div class="register-box">
  <div class="register-logo">
    <a href="../../index2.html"><b>Aviation</b>Management</a>
  </div>

  <div class="card">
    <div class="card-body register-card-body">
      <p class="login-box-msg">Registro de novo usuário</p>

      

      <form [formGroup]="registerForm">
        <div class="input-group mb-3">
          <input type="email" class="form-control" formControlName="email" [ngClass]="{ 'is-invalid': registerForm.get('email').errors && registerForm.get('email').touched}" placeholder="E-mail">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-envelope"></span>
            </div>
          </div>
          <div *ngIf="registerForm.get('email').hasError('required') &&
                    registerForm.get('email').touched" class="invalid-feedback">
          E-mail é obrigatório.
          </div>
        </div>
        
        <div formGroupName="passwords">
        <div class="input-group mb-3">
          <input type="password" class="form-control" formControlName="password" [ngClass]="{ 'is-invalid': registerForm.get('passwords.password').errors && registerForm.get('passwords.password').touched}" placeholder="Senha">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
          <div *ngIf="registerForm.get('passwords.password').hasError('minlength') &&
            registerForm.get('passwords.password').touched" class="invalid-feedback">
            Deve conter no mínimo 6 caracters
          </div>
          <div *ngIf="registerForm.get('passwords.password').hasError('required') &&
                      registerForm.get('passwords.password').touched" class="invalid-feedback">
            Senha é obrigatório.
          </div>
        </div>
        <div class="input-group mb-3">
          <input type="password" class="form-control" formControlName="confirmPassword" [ngClass]="{ 'is-invalid': registerForm.get('passwords.confirmPassword').errors && registerForm.get('passwords.confirmPassword').touched 
                       || registerForm.get('passwords.confirmPassword').hasError('mismatch') && registerForm.get('passwords.confirmPassword').touched }" placeholder="Confirmação de senha">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
          <div *ngIf="registerForm.get('passwords.confirmPassword').hasError('required') &&
                      registerForm.get('passwords.confirmPassword').touched" class="invalid-feedback">
            Confirme a Senha
          </div>
          <div *ngIf="registerForm.get('passwords.confirmPassword').hasError('mismatch') 
                      && registerForm.get('passwords.confirmPassword').touched" class="invalid-feedback">
            Confirmação não confere
          </div>
        </div>
      </div>
        <div class="row">
          <div class="col-12">
            <button class="btn btn-lg btn-success btn-block" [disabled]="!registerForm.valid" (click)="cadastrarUsuario()">Registar</button>
          </div>
          <!-- /.col -->
        </div>
      </form>
      <br>
      <br>
      <a routerLink="/conta/login" class="text-center">Eu já tenho conta</a>
    </div>
    <!-- /.form-box -->
  </div><!-- /.card -->
</div>
<!-- /.register-box -->
</div>