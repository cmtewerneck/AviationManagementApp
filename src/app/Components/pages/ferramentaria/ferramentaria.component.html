
<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="container-fluid" style="padding-left: 20px;">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Estoque</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
            <li class="breadcrumb-item active">Estoque</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
</section>
  
<!-- Main content -->
<section class="content">
    <div class="container-fluid" style="padding-left: 30px; padding-right: 30px;">
      <div class="d-flex">
        <div class="form-inline mr-auto">
          <div class="form-group mb-2">
              <input type="text" class="form-control mr 2" placeholder="Buscar" [(ngModel)]="filtroLista">
          </div>
        </div>
        <div>
          <button class="btn btn-success" (click)="novaFerramentaria(template)"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;Novo Item</button>
        </div>
      </div>
    <table class="table table-striped table-responsive" style="font-size: 90%; white-space: nowrap">
        <thead class="thead-dark">
            <tr>
                <th>#</th>
                <th>Item</th>
                <th>PartNumber</th>
                <th>Nomenclatura</th>
                <th>Quantidade</th>
                <th>Localização</th>
                <th>PartNumber Alternativo</th>
                <th>Aplicação</th>
                <th>Capítulo</th>
                <th>Serial Number</th>
                <th>DOC</th>
                <th>Status</th>
                <th>Opções</th>
            </tr>
        </thead>
        <tbody *ngIf="ferramentarias && ferramentarias.length">
            <tr *ngFor="let ferramentaria of ferramentariasFiltradas">
                <td></td>
                <td>{{ferramentaria.item}}</td>
                <td>{{ferramentaria.partNumber}}</td>
                <td>{{ferramentaria.nomenclatura}}</td>
                <td>{{ferramentaria.quantidade}}</td>
                <td>{{ferramentaria.localizacao}}</td>
                <td>{{ferramentaria.partNumberAlternativo}}</td>
                <td>{{ferramentaria.aplicacao}}</td>
                <td>{{ferramentaria.capitulo}}</td>
                <td>{{ferramentaria.serialNumber}}</td>
                <td>{{ferramentaria.doc}}</td>
                <td>{{ferramentaria.status}}</td>
                <td>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-primary" tooltip="Editar" (click)="editarFerramentaria(ferramentaria, template)"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-sm btn-danger" tooltip="Excluir" (click)="excluirFerramentaria(ferramentaria, confirm)"><i class="fa fa-trash"></i></button>
                    </div>
                </td>
            </tr>
        </tbody>
        <tfoot *ngIf="!ferramentarias">
            <tr>
                <td colspan="7" class="text-center">
                    <h4>
                        Nenhum item encontrado!
                    </h4>
                </td>
            </tr>
        </tfoot>
    </table>
    </div>
</section>
<!-- /.content -->


<div bsModal #template="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="dialog-sizes-name1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="dialog-sizes-name1" class="modal-title pull-left">Novo Item</h4>
        <button type="button" class="close pull-right" (click)="template.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="registerForm">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Nomenclatura</label>
                    <input type="text" class="form-control is-invalid" 
                    [ngClass]="{'is-invalid': registerForm.get('nomenclatura').errors && registerForm.get('nomenclatura').touched}" 
                    formControlName="nomenclatura">
                    <div *ngIf="registerForm.get('nomenclatura').hasError('required') && registerForm.get('nomenclatura').touched" class="invalid-feedback">Nomenclatura é obrigatória</div>
                  </div>
                <div class="form-group col-md-3">
                    <label>Item</label>
                    <input type="text" class="form-control" formControlName="item">
                </div>
                <div class="form-group col-md-3">
                    <label>Part Number</label>
                    <input type="text" class="form-control" formControlName="partNumber">
              </div>
          </div> 

        <div class="form-row">
            <div class="form-group col-md-3">
                <label>Quantidade</label>
                <input type="number" class="form-control is-invalid" 
                [ngClass]="{'is-invalid': registerForm.get('quantidade').errors && registerForm.get('quantidade').touched}" 
                formControlName="quantidade">
                <div *ngIf="registerForm.get('quantidade').hasError('required') && registerForm.get('quantidade').touched" class="invalid-feedback">Quantidade é obrigatória</div>
            </div>
            <div class="form-group col-md-3">
                <label>Localização</label>
                <input type="text" class="form-control" formControlName="localizacao">
            </div>
            <div class="form-group col-md-3">
                <label>Part Number Alternativo</label>
                <input type="text" class="form-control" formControlName="partNumberAlternativo">
            </div>
            <div class="form-group col-md-3">
                <label>Aplicação</label>
                <input type="text" class="form-control" formControlName="aplicacao">
            </div>
        </div> 

        <div class="form-row">
            <div class="form-group col-md-3">
                <label>Capítulo</label>
                <input type="text" class="form-control" formControlName="capitulo">
            </div>
            <div class="form-group col-md-3">
                <label>Serial Number</label>
                <input type="text" class="form-control" formControlName="serialNumber">
            </div>
            <div class="form-group col-md-3">
                <label>DOC</label>
                <input type="text" class="form-control" formControlName="doc">
            </div>
            <div class="form-group col-md-3">
                <label>Status</label>
                <input type="text" class="form-control" formControlName="status">
            </div>
        </div> 
    </form>
</div>
      <div class="modal-footer d-flex">
        <button class="btn btn-secondary" (click)="template.hide()">
          Fechar
        </button>
        <button class="btn btn-primary ml-auto" [disabled]="!registerForm.valid" (click)="salvarAlteracao(template)">
          Adicionar
        </button>
      </div>
    </div>
  </div>
</div>



<div bsModal #confirm="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
	<div class="modal-dialog modal-sm">
  		<div class="modal-content">
    		<div class="modal-header">
      			<h4 class="modal-title pull-left">
        			Excluindo Item
      			</h4>
      			<button type="button" class="close pull-right" (click)="confirm.hide()" aria-label="Close">
        			<span aria-hidden="true">&times;</span>
      			</button>
    		</div>
    		<div class="modal-body">
      			<p>{{bodyDeletarFerramentaria}}</p>
    		</div>    
    		<div class="modal-footer btn-group d-flex">      
      			<button type="button" class="btn btn-outline-primary" (click)="confirm.hide()">
        			CENCELAR
      			</button>
      			<button type="button" class="btn btn-outline-danger" (click)="confirmeDelete(confirm)">
          			EXCLUIR
        		</button>
    		</div>
  		</div>
	</div>
</div>