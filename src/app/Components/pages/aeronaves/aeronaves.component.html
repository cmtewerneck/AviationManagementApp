
<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="container-fluid" style="padding-left: 20px;">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Aeronaves</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
            <li class="breadcrumb-item active">Aeronaves</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
</section>
  
<!-- Main content -->
<section class="content">
  <div class="container-fluid" style="padding-left: 30px; padding-right: 30px;">
      <div class="d-flex">
        <div class="form-inline mr-auto">
          <div class="form-group mb-2">
              <input type="text" class="form-control mr 2" placeholder="Buscar" [(ngModel)]="filtroLista">
          </div>
        </div>
        <div>
          <button class="btn btn-success" (click)="novaAeronave(template)"><i class="fa fa-plus-circle"></i>&nbsp;&nbsp;Nova Aeronave</button>
        </div>
      </div>
    <table class="table table-striped table-responsive" style="font-size: 90%; white-space: nowrap">
        <thead class="thead-dark">
            <tr>
                <th>#</th>
                <th>Matrícula</th>
                <th>Fabricante</th>
                <th>Modelo</th>
                <th>Categoria</th>
                <th>Ano</th>
                <th>Peso Vazio</th>
                <th>Horas Totais</th>
                <th>Horas Restantes</th>
                <th>Vencimento CA</th>
                <th>Vencimento CM</th>
                <th>Última Pesagem</th>
                <th>Vencimento RETA</th>
                <th>Opções</th>
            </tr>
        </thead>
        <tbody *ngIf="aeronaves && aeronaves.length">
            <tr *ngFor="let aeronave of aeronavesFiltradas">
                <td></td>
                <td>{{aeronave.matricula}}</td>
                <td>{{aeronave.fabricante}}</td>
                <td>{{aeronave.modelo}}</td>
                <td>{{aeronave.categoria}}</td>
                <td>{{aeronave.ano}}</td>
                <td>{{aeronave.pesoVazio}}</td>
                <td>{{aeronave.horasTotais}}</td>
                <td>{{aeronave.horasRestantes}}</td>
                <td>{{aeronave.vencimentoCA}}</td>
                <td>{{aeronave.vencimentoCM}}</td>
                <td>{{aeronave.ultimaPesagem}}</td>
                <td>{{aeronave.vencimentoReta}}</td>
                <td>
                    <div class="btn-group">
                        <button class="btn btn-sm btn-primary" tooltip="Editar" (click)="editarAeronave(aeronave, template)"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-sm btn-danger" tooltip="Excluir" (click)="excluirAeronave(aeronave, confirm)"><i class="fa fa-trash"></i></button>
                    </div>
                </td>
            </tr>
        </tbody>
        <tfoot *ngIf="!aeronaves">
            <tr>
                <td colspan="7" class="text-center">
                    <h4>
                        Nenhum item encontrado!
                    </h4>
                </td>
            </tr>
        </tfoot>
    </table>
    </div>
</section>
<!-- /.content -->


<div bsModal #template="bs-modal" class="modal fade" tabindex="-1"
     role="dialog" aria-labelledby="dialog-sizes-name1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="dialog-sizes-name1" class="modal-title pull-left">Nova Aeronave</h4>
        <button type="button" class="close pull-right" (click)="template.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="registerForm">

          <div class="form-row">
            <div class="form-group col-md-4">
                  <label>Matrícula</label>
                  <input type="text" class="form-control" 
                  [ngClass]="{'is-invalid': registerForm.get('matricula').errors && registerForm.get('matricula').touched}"  
                  formControlName="matricula" placeholder="Insira sua matricula">
                    <div *ngIf="registerForm.get('matricula').hasError('required') && registerForm.get('matricula').touched" class="invalid-feedback">Matricula é obrigatório</div>
                    <div *ngIf="registerForm.get('matricula').hasError('minlength') && registerForm.get('matricula').touched" class="invalid-feedback">Matricula deve ter no mínimo 5 caracteres</div>
                    <div *ngIf="registerForm.get('matricula').hasError('maxlength') && registerForm.get('matricula').touched" class="invalid-feedback">Matricula deve ter no máximo 5 caracteres</div>
            </div>
            <div class="form-group col-md-4">
                <label>Fabricante</label>
                <input type="text" class="form-control" 
                [ngClass]="{'is-invalid': registerForm.get('fabricante').errors && registerForm.get('fabricante').touched}"  
                formControlName="fabricante" placeholder="Insira seu fabricante">
                    <div *ngIf="registerForm.get('fabricante').hasError('required') && registerForm.get('fabricante').touched" class="invalid-feedback">Fabricante é obrigatório</div>
                    <div *ngIf="registerForm.get('fabricante').hasError('minlength') && registerForm.get('fabricante').touched" class="invalid-feedback">Fabricante deve ter no mínimo 2 caracteres</div>
                    <div *ngIf="registerForm.get('fabricante').hasError('maxlength') && registerForm.get('fabricante').touched" class="invalid-feedback">Fabricante deve ter no máximo 50 caracteres</div>
            </div>
            <div class="form-group col-md-4">
                <label>Modelo</label>
                <input type="text" class="form-control" 
                [ngClass]="{'is-invalid': registerForm.get('modelo').errors && registerForm.get('modelo').touched}"  
                formControlName="modelo" placeholder="Insira seu modelo">
                    <div *ngIf="registerForm.get('modelo').hasError('required') && registerForm.get('modelo').touched" class="invalid-feedback">Modelo é obrigatório</div>
                    <div *ngIf="registerForm.get('modelo').hasError('minlength') && registerForm.get('modelo').touched" class="invalid-feedback">Modelo deve ter no mínimo 2 caracteres</div>
                    <div *ngIf="registerForm.get('modelo').hasError('maxlength') && registerForm.get('modelo').touched" class="invalid-feedback">Modelo deve ter no máximo 50 caracteres</div>
            </div>
          </div> 

          <div class="form-row">
            <div class="form-group col-md-4">
                  <label>Categoria</label>
                  <input type="text" class="form-control" 
                  [ngClass]="{'is-invalid': registerForm.get('categoria').errors && registerForm.get('categoria').touched}"  
                  formControlName="categoria" placeholder="Insira sua categoria">
                    <div *ngIf="registerForm.get('categoria').hasError('required') && registerForm.get('categoria').touched" class="invalid-feedback">Categoria é obrigatório</div>
                    <div *ngIf="registerForm.get('categoria').hasError('minlength') && registerForm.get('categoria').touched" class="invalid-feedback">Categoria deve ter no mínimo 2 caracteres</div>
                    <div *ngIf="registerForm.get('categoria').hasError('maxlength') && registerForm.get('categoria').touched" class="invalid-feedback">Categoria deve ter no máximo 20 caracteres</div>
            </div>
            <div class="form-group col-md-4">
                <label>Ano</label>
                <input type="number" class="form-control" formControlName="ano" placeholder="Insira o ano">
            </div>
            <div class="form-group col-md-4">
                <label>Peso Vazio</label>
                <input type="number" class="form-control" formControlName="pesoVazio" placeholder="Insira o peso vazio">
            </div>
          </div> 

          <div class="form-row">
            <div class="form-group col-md-4">
                  <label>Horas Totais</label>
                  <input type="number" class="form-control" formControlName="horasTotais" placeholder="Insira as horas totais">
            </div>
            <div class="form-group col-md-4">
                <label>Horas Restantes</label>
                <input type="number" class="form-control" formControlName="horasRestantes" placeholder="Insira as horas restantes">
            </div>
            <div class="form-group col-md-4">
                <label>Vencimento CA</label>
                <input type="date" class="form-control" formControlName="vencimentoCA" placeholder="Insira a data do vencimento do CA">
            </div>
          </div> 

          <div class="form-row">
            <div class="form-group col-md-4">
                  <label>Vencimento CM</label>
                  <input type="date" class="form-control" formControlName="vencimentoCM" placeholder="Insira a data do vencimento do CM">
            </div>
            <div class="form-group col-md-4">
                <label>Última Pesagem</label>
                <input type="date" class="form-control" formControlName="ultimaPesagem" placeholder="Insira a data da última pesagem">
            </div>
            <div class="form-group col-md-4">
                <label>Vencimento Reta</label>
                <input type="date" class="form-control" formControlName="vencimentoReta" placeholder="Insira a data do vencimento do Reta">
            </div>
          </div>
           
        </form>
      </div>
      <div class="modal-footer d-flex">
        <button class="btn btn-secondary" (click)="template.hide()">
          Fechar
        </button>
        <button class="btn btn-primary ml-auto" [disabled]="!registerForm.valid" (click)="salvarAlteracao(template)">
          Adicionar
        </button>
      </div>
    </div>
  </div>
</div>



<div bsModal #confirm="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialog-sizes-name1">
	<div class="modal-dialog modal-sm">
  		<div class="modal-content">
    		<div class="modal-header">
      			<h4 class="modal-title pull-left">
        			Excluindo Aeronave
      			</h4>
      			<button type="button" class="close pull-right" (click)="confirm.hide()" aria-label="Close">
        			<span aria-hidden="true">&times;</span>
      			</button>
    		</div>
    		<div class="modal-body">
      			<p>{{bodyDeletarAeronave}}</p>
    		</div>    
    		<div class="modal-footer btn-group d-flex">      
      			<button type="button" class="btn btn-outline-primary" (click)="confirm.hide()">
        			CENCELAR
      			</button>
      			<button type="button" class="btn btn-outline-danger" (click)="confirmeDelete(confirm)">
          			EXCLUIR
        		</button>
    		</div>
  		</div>
	</div>
</div>